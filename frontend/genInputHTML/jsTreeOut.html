<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>iSigDB</title>
<link rel="stylesheet" href="../vakata-jstree-5bece58/dist/themes/default/style.min.css" />
<link rel="stylesheet" href="../tooltip.css">

<script type="text/javascript">

function toggleVisibility(section) {
    var section = document.getElementById(section);
    if (section.style.display == 'block' || section.style.display == ''){
        section.style.display = 'none';
    } else {
        section.style.display = 'block';
    }
}

function submitCheckboxes() {
    var checkedIds = $('#sigs').jstree("get_selected");
    document.getElementById('checkedSigs').value = checkedIds.join(",");
}
function genesChanged(dropdown) {if (dropdown.selectedIndex > 2) {
    var disableList = ['Th2_rankRelative', 'Th1_rankRelative', 'Th17'];
    for (var i = 0; i < disableList.length; i++) {
      document.getElementById(disableList[i]).checked = false;
      document.getElementById(disableList[i]).disabled = true;
    }
  }
  else {
    var disableList = ['Th2_rankRelative', 'Th1_rankRelative', 'Th17'];
    for (var i = 0; i < disableList.length; i++) {
      document.getElementById(disableList[i]).disabled = false;
    }
  }

if (dropdown.selectedIndex > 3) {
    var disableList = ['IGNg_TNF_24h_HaCaT_27', 'IL17A_TNF_10ng_2h_NHEK_33', 'IFNg_10ng_24h_NHEK_55', 'Th1_Harvard', 'IL26d', 'IFNg_20ng_24h_NHEK_45', 'IFNg_10ng_4d_NHEK_12', 'IFNg_24h_NHEK_2', 'IFNg_24h_NHEK_3', 'TNF_20ng_4h_HaCaT_43', 'IL17A_20ng_24h_NHEK_49', 'IL17A_TNF_1ng_24h_NHEK_32', 'Th2_Harvard', 'IL22_20ng_4d_NHEK_9', 'IFNg_20ng_24h_NHEK_23'];
    for (var i = 0; i < disableList.length; i++) {
      document.getElementById(disableList[i]).checked = false;
      document.getElementById(disableList[i]).disabled = true;
    }
  }
  else {
    var disableList = ['IGNg_TNF_24h_HaCaT_27', 'IL17A_TNF_10ng_2h_NHEK_33', 'IFNg_10ng_24h_NHEK_55', 'Th1_Harvard', 'IL26d', 'IFNg_20ng_24h_NHEK_45', 'IFNg_10ng_4d_NHEK_12', 'IFNg_24h_NHEK_2', 'IFNg_24h_NHEK_3', 'TNF_20ng_4h_HaCaT_43', 'IL17A_20ng_24h_NHEK_49', 'IL17A_TNF_1ng_24h_NHEK_32', 'Th2_Harvard', 'IL22_20ng_4d_NHEK_9', 'IFNg_20ng_24h_NHEK_23'];
    for (var i = 0; i < disableList.length; i++) {
      document.getElementById(disableList[i]).disabled = false;
    }
  }

if (dropdown.selectedIndex > 4) {
    var disableList = ['abbrevs.txt~', 'ENL2', 'LL2', 'TL2', 'RR2'];
    for (var i = 0; i < disableList.length; i++) {
      document.getElementById(disableList[i]).checked = false;
      document.getElementById(disableList[i]).disabled = true;
    }
  }
  else {
    var disableList = ['abbrevs.txt~', 'ENL2', 'LL2', 'TL2', 'RR2'];
    for (var i = 0; i < disableList.length; i++) {
      document.getElementById(disableList[i]).disabled = false;
    }
  }


}
</script>

<br>
<form id="tissueDeconvolution" name="tissueDeconvolution" method="post" action="/cgi-bin/goTeles/tissueDeconvolutionByRank.cgi" ENCTYPE="multipart/form-data">
<strong class = "tooltip">Submit a file:</strong> <br>
<input type="radio" name="uploadSettings" value="client" checked="checked" onchange="toggleVisibility('clientFile');toggleVisibility('serverFile');">Upload a file from your computer <a href="#" class="tooltip"><img src="../questionmark.png" width=15 height=15><span><strong>File guidelines</strong><br/>The uploaded file must be tab-separated. Columns should correspond to samples and rows should correspond to genes. There is a size limit of 100mb.</span></a>  <br>
<input type="radio" name="uploadSettings" value="server" onchange="toggleVisibility('clientFile');toggleVisibility('serverFile');">Use a file from the server <br>
<div id="clientFile" name="clientFile">
File: <input type="file" name="matrix_file" size="30">
</div>
<div id="serverFile" name="serverFile" style="display:none">
Filename: <input type="text" name="serverFileName"> or <a href="./serverFileUpload.html">upload a file</a>
</div>
<hr>

<strong>Heatmap options:</strong><br /><br />
Compute heatmap based on:&nbsp;
<select id="heatmap_metric" name="heatmap_metric">
<option value="rank_avg">Rank Average</option>
<option value="rank_delta">Rank Delta</option>
<option value="log">Log10-Transformed Values</option>
<option value="absolute">Values (Do Not Log-Transform)</option>
</select> <a href="#" class="tooltip"><img src="../questionmark.png" width=15 height=15><span><strong>Rank Average</strong> computes similarity between genes based on ordering them by importance<br><strong>Rank Delta</strong> computes similarity using the difference between a gene's rank in one sample and its mean rank across all samples<br><strong>Log10-Transformed Values</strong> uses log-transformed raw expression values instead of gene rank<br><strong>Values (Do Not Log-Transform)</strong> uses non-log-transformed raw values instead of gene rank</span></a>

<br /><br />
<input type="checkbox" name="scale_columns" id="scale_columns" value="checked"
checked> Scale heatmap <a href="#" class="tooltip"><img src="../questionmark.png" width=15 height=15><span>Scaling a heatmap replaces output values with their z-scores taken across the entire matrix</span></a>

<br /><br />

<input type="checkbox" name="invert" id="invert" value="checked" checked> Signatures on vertical axis

<br /><br />

<input type="checkbox" name="fixed" id="fixed" value="checked" checked>Dynamically choose colors
<a href="#" class="tooltip"><img src="../questionmark.png" width=15 height=15><span>If checked, the colors in the heatmap will rescale to fit the input data better. However, if you wish to compare different heatmaps, it is better to uncheck this option so that their colors correspond to the same values</span></a>
<br> <br>

Metric for sample clustering: &nbsp;
<select id="row_metric" name="row_metric">
<option value="euclidean">Euclidean Distance</option>
<option value="pear_cor">Pearson Correlation</option>
<option value="none">None (Do Not Cluster)</option>
</select>
<br />

Metric for signature clustering: &nbsp;
<select id="col_metric" name="col_metric">
<option value="euclidean">Euclidean Distance</option>
<option value="pear_cor">Pearson Correlation</option>
<option value="none">None (Do Not Cluster)</option>
</select><br />


<br />

Number of genes per signature:&nbsp;<select
name="num_genes" onchange="genesChanged(this);"><option value="10">10</option><option
value="25">25</option><option value="50" selected="selected">50</option><option
value="100">100</option><option value="250">250</option><option
value="500">500</option><option value="1000">1000</option></select>
<a href="#" class="tooltip"><img src="../questionmark.png" width=15 height=15><span>How many genes from each signature will be compared against the input file.</span></a>
<hr>

<strong>Select signatures:</strong><br />
Click on a category to select specific signatures within that category <br />
<div id="sigs">
<ul>
<li id="Mouse">Mouse
<ul><li id="Mouse Body Atlas">Mouse Body Atlas
<ul><li id="3T3-L1">3T3-L1
</li><li id="B-cells_marginal_zone">B-cells_marginal_zone
</li><li id="Baf3">Baf3
</li><li id="C2C12">C2C12
</li><li id="C3H_10T1_2">C3H_10T1_2
</li><li id="NK_cells">NK_cells
</li><li id="RAW_264_7">RAW_264_7
</li><li id="T-cells_CD4+">T-cells_CD4+
</li><li id="T-cells_CD8+">T-cells_CD8+
</li><li id="T-cells_foxP3+">T-cells_foxP3+
</li><li id="adipose_brown">adipose_brown
</li><li id="adipose_white">adipose_white
</li><li id="adrenal_gland">adrenal_gland
</li><li id="amygdala">amygdala
</li><li id="bladder">bladder
</li><li id="bone">bone
</li><li id="bone_marrow">bone_marrow
</li><li id="cerebellum">cerebellum
</li><li id="cerebral_cortex">cerebral_cortex
</li><li id="cerebral_cortex_prefrontal">cerebral_cortex_prefrontal
</li><li id="ciliary_bodies">ciliary_bodies
</li><li id="common_myeloid_progenitor">common_myeloid_progenitor
</li><li id="cornea">cornea
</li><li id="dendritic_cells_lymphoid_CD8a+">dendritic_cells_lymphoid_CD8a+
</li><li id="dendritic_cells_myeloid_CD8a-">dendritic_cells_myeloid_CD8a-
</li><li id="dendritic_plasmacytoid_B220+">dendritic_plasmacytoid_B220+
</li><li id="dorsal_root_ganglia">dorsal_root_ganglia
</li><li id="dorsal_striatum">dorsal_striatum
</li><li id="embryonic_stem_line_Bruce4_p13">embryonic_stem_line_Bruce4_p13
</li><li id="embryonic_stem_line_V26_2_p16">embryonic_stem_line_V26_2_p16
</li><li id="epidermis">epidermis
</li><li id="eyecup">eyecup
</li><li id="follicular_B-cells">follicular_B-cells
</li><li id="granulo_mono_progenitor">granulo_mono_progenitor
</li><li id="granulocytes_mac1+gr1+">granulocytes_mac1+gr1+
</li><li id="heart">heart
</li><li id="hippocampus">hippocampus
</li><li id="hypothalamus">hypothalamus
</li><li id="intestine_large">intestine_large
</li><li id="intestine_small">intestine_small
</li><li id="iris">iris
</li><li id="kidney">kidney
</li><li id="lacrimal_gland">lacrimal_gland
</li><li id="lens">lens
</li><li id="liver">liver
</li><li id="lung">lung
</li><li id="lymph_nodes">lymph_nodes
</li><li id="mIMCD-3">mIMCD-3
</li><li id="macrophage_bone_marrow_0hr">macrophage_bone_marrow_0hr
</li><li id="macrophage_bone_marrow_24h_LPS">macrophage_bone_marrow_24h_LPS
</li><li id="macrophage_bone_marrow_2hr_LPS">macrophage_bone_marrow_2hr_LPS
</li><li id="macrophage_bone_marrow_6hr_LPS">macrophage_bone_marrow_6hr_LPS
</li><li id="macrophage_peri_LPS_thio_0hrs">macrophage_peri_LPS_thio_0hrs
</li><li id="macrophage_peri_LPS_thio_1hrs">macrophage_peri_LPS_thio_1hrs
</li><li id="macrophage_peri_LPS_thio_7hrs">macrophage_peri_LPS_thio_7hrs
</li><li id="mammary_gland__lact">mammary_gland__lact
</li><li id="mammary_gland_non-lactating">mammary_gland_non-lactating
</li><li id="mast_cells">mast_cells
</li><li id="mast_cells_IgE">mast_cells_IgE
</li><li id="mast_cells_IgE+antigen_1hr">mast_cells_IgE+antigen_1hr
</li><li id="mast_cells_IgE+antigen_6hr">mast_cells_IgE+antigen_6hr
</li><li id="mega_erythrocyte_progenitor">mega_erythrocyte_progenitor
</li><li id="microglia">microglia
</li><li id="min6">min6
</li><li id="neuro2a">neuro2a
</li><li id="nih_3T3">nih_3T3
</li><li id="nucleus_accumbens">nucleus_accumbens
</li><li id="olfactory_bulb">olfactory_bulb
</li><li id="osteoblast_day14">osteoblast_day14
</li><li id="osteoblast_day21">osteoblast_day21
</li><li id="osteoblast_day5">osteoblast_day5
</li><li id="osteoclasts">osteoclasts
</li><li id="ovary">ovary
</li><li id="pancreas">pancreas
</li><li id="pituitary">pituitary
</li><li id="placenta">placenta
</li><li id="prostate">prostate
</li><li id="retina">retina
</li><li id="retinal_pigment_epithelium">retinal_pigment_epithelium
</li><li id="salivary_gland">salivary_gland
</li><li id="skeletal_muscle">skeletal_muscle
</li><li id="spinal_cord">spinal_cord
</li><li id="spleen">spleen
</li><li id="stem_cells__HSC">stem_cells__HSC
</li><li id="stomach">stomach
</li><li id="testis">testis
</li><li id="thymocyte_DP_CD4+CD8+">thymocyte_DP_CD4+CD8+
</li><li id="thymocyte_SP_CD4+">thymocyte_SP_CD4+
</li><li id="thymocyte_SP_CD8+">thymocyte_SP_CD8+
</li><li id="umbilical_cord">umbilical_cord
</li><li id="uterus">uterus
</li></ul></li></ul></li><li id="Human">Human
<ul><li id="Skin Conditions">Skin Conditions
<ul><li id="Normal skin">Normal skin
</li><li id="Psoriasis">Psoriasis
</li><li id="Burn">Burn
</li><li id="Acute wound (0h after injury)">Acute wound (0h after injury)
</li><li id="Post-operative wound (3, 7 days after injury)">Post-operative wound (3, 7 days after injury)
</li><li id="Stevens Johnson syndrome (blister cells)">Stevens Johnson syndrome (blister cells)
</li><li id="Reversal reaction (leprosy)">Reversal reaction (leprosy)
</li><li id="Lepromatous leprosy">Lepromatous leprosy
</li><li id="Tuberculoid leprosy">Tuberculoid leprosy
</li><li id="Erythema nodosum leprosum">Erythema nodosum leprosum
</li><li id="Allergic contact dermatitis">Allergic contact dermatitis
</li><li id="Irritant contact dermatitis">Irritant contact dermatitis
</li><li id="Atopic dermatitis">Atopic dermatitis
</li><li id="Mycosis fungoides">Mycosis fungoides
</li><li id="Squamous cell carcinoma">Squamous cell carcinoma
</li><li id="Basal cell carcinoma">Basal cell carcinoma
</li><li id="Melanoma">Melanoma
</li><li id="Cutaneous sarcoidosis">Cutaneous sarcoidosis
</li><li id="Chancroid">Chancroid
</li><li id="Alopecia areata">Alopecia areata
</li><li id="Discoid Lupus Erythematosus">Discoid Lupus Erythematosus
</li><li id="Acne">Acne
</li><li id="Non-lesional acne">Non-lesional acne
</li></ul></li></ul></li><l</ul></div>
<input type="submit" id="tissueDeconvolutionSubmit" name="tissueDeconvolutionSubmit" onclick="submitCheckboxes()" value="Submit" />

</form>
<script src="../js/jquery-1.11.3.min.js"></script>
	<script src="../vakata-jstree-5bece58/dist/jstree.min.js"></script>
    <script>
        $(function () {
            $('#sigs').jstree({
                "checkbox" : {
                    "keep_selected_style" : false
                },
                "plugins" : [ "checkbox" ],
                "core": {
                    "themes":{
                        "icons":false
                    }
                }
            });
        window.onload = function (){$('#sigs').jstree('close_all');$('#sigs').jstree('check_all');};
        });

    </script>
</body>
</html>